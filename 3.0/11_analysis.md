# Разбор задачи "17. Конвейер"

## Описание задачи

Задача про конвейер для транспортировки материалов из цеха A в цех B. Материалы упаковываются в контейнеры и размещаются на ленте один за одним в порядке изготовления в цехе A. Каждый контейнер имеет степень срочности обработки в цехе B.

Для упорядочивания контейнеров по степени срочности используется накопитель, который может выполнять следующие действия:

1. Перемещать первый контейнер из ленты в цех B
2. Перемещать первый контейнер из строки в склад (в складе каждый следующий контейнер помещается на предыдущий)
3. Перемещать верхний контейнер из склада в цех B

Нужно определить, можно ли упорядочить контейнеры по степени срочности, используя описанный накопитель.

## Анализ решения

### Основная идея

Задача сводится к проверке возможности сортировки последовательности с использованием стека (склада). Это классическая задача на стеки.

### Алгоритм

1. **Моделирование процесса**: Используем два стека:

   - `warehouseStack` - склад (накопитель)
   - `bStack` - цех B (выходная последовательность)

2. **Обработка каждого контейнера**:

   ```javascript
   for (let j = 0; j < containers.length; j++) {
     const container = containers[j];

     // Пытаемся переместить контейнеры из склада в цех B
     while (
       warehouseStack.length &&
       warehouseStack.at(-1) < container &&
       (warehouseStack.at(-1) >= bStack.at(-1) || !bStack.length)
     ) {
       bStack.push(warehouseStack.pop());
     }

     // Проверяем, можем ли добавить текущий контейнер
     if (bStack.length && bStack.at(-1) > container) {
       result.push(0); // Невозможно упорядочить
       break;
     }

     warehouseStack.push(container);
   }
   ```

3. **Условие перемещения из склада в цех B**:

   - Верхний элемент склада меньше текущего контейнера
   - И либо цех B пуст, либо верхний элемент склада больше или равен последнему элементу в цехе B

4. **Проверка невозможности**:

   - Если последний элемент в цехе B больше текущего контейнера, то упорядочивание невозможно

5. **Финальная обработка склада**:
   ```javascript
   while (warehouseStack.length) {
     if (bStack.length && warehouseStack.at(-1) < bStack.at(-1)) {
       result.push(0);
       break;
     }
     bStack.push(warehouseStack.pop());
   }
   ```

### Ключевые моменты

1. **Стек как накопитель**: Склад работает по принципу LIFO (Last In, First Out)

2. **Условие сортировки**: Для успешной сортировки каждый элемент должен быть помещен в правильное место в выходной последовательности

3. **Жадный алгоритм**: На каждом шаге пытаемся переместить максимальное количество элементов из склада в цех B

4. **Проверка монотонности**: Выходная последовательность должна быть неубывающей

### Сложность

- **Временная сложность**: O(n) для каждого теста, где n - количество контейнеров
- **Пространственная сложность**: O(n) для хранения стеков

### Пример работы

Для последовательности [3, 1, 2]:

1. Контейнер 3: помещаем в склад → склад: [3]
2. Контейнер 1:
   - Не можем переместить 3 из склада (3 > 1)
   - Помещаем 1 в склад → склад: [3, 1]
3. Контейнер 2:
   - Перемещаем 1 из склада в цех B → склад: [3], цех B: [1]
   - Помещаем 2 в склад → склад: [3, 2]
4. Финальная обработка:
   - Перемещаем 2 из склада в цех B → склад: [3], цех B: [1, 2]
   - Перемещаем 3 из склада в цех B → склад: [], цех B: [1, 2, 3]

Результат: упорядочивание возможно (1).

## Заключение

Решение эффективно моделирует работу конвейера с накопителем, используя стеки для представления склада и выходной последовательности. Алгоритм корректно определяет возможность сортировки входной последовательности с использованием одного дополнительного стека.
